<!DOCTYPE html>
<html lang=\"pt-BR\">
<head>
    <meta charset=\"UTF-8\">
    <title>Relat√≥rio Avan√ßado - {title}</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            color: #333;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            border-bottom: 3px solid #007bff;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #007bff;
            margin: 0;
            font-size: 28px;
        }
        
        .header .subtitle {
            color: #666;
            font-size: 16px;
            margin-top: 10px;
        }
        
        .meta-info {
            display: flex;
            justify-content: space-between;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 30px;
        }
        
        .meta-item {
            text-align: center;
        }
        
        .meta-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
        }
        
        .meta-value {
            font-size: 14px;
            font-weight: bold;
            color: #333;
        }
        
        .section {
            margin: 30px 0;
        }
        
        .section-title {
            font-size: 20px;
            color: #007bff;
            border-left: 4px solid #007bff;
            padding-left: 15px;
            margin-bottom: 20px;
        }
        
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .kpi-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .kpi-value {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .kpi-label {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .chart-placeholder {
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .data-table th {
            background: #007bff;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .data-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        
        .data-table tr:hover {
            background: #f8f9fa;
        }
        
        .progress-section {
            margin: 30px 0;
        }
        
        .progress-item {
            margin: 15px 0;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .progress-bar {
            background: #e9ecef;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        
        .alert {
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        
        .alert-success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        
        .alert-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
        
        .alert-danger {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        
        .alert-info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
        
        .footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #dee2e6;
            text-align: center;
            color: #666;
            font-size: 12px;
        }
        
        .signature-area {
            display: flex;
            justify-content: space-around;
            margin: 40px 0;
        }
        
        .signature-box {
            text-align: center;
            width: 200px;
        }
        
        .signature-line {
            border-top: 1px solid #333;
            margin-bottom: 10px;
        }
        
        @media print {
            body { background: white; }
            .container { box-shadow: none; }
            .no-print { display: none; }
        }
    </style>
</head>
<body>
    <div class=\"container\">
        <!-- Cabe√ßalho -->
        <div class=\"header\">
            <h1>{title ?: 'Relat√≥rio Executivo'}</h1>
            {#if subtitle}
                <div class=\"subtitle\">{subtitle}</div>
            {/if}
        </div>

        <!-- Informa√ß√µes Meta -->
        <div class=\"meta-info\">
            {#if date}
                <div class=\"meta-item\">
                    <div class=\"meta-label\">Data</div>
                    <div class=\"meta-value\">{date}</div>
                </div>
            {/if}
            {#if period}
                <div class=\"meta-item\">
                    <div class=\"meta-label\">Per√≠odo</div>
                    <div class=\"meta-value\">{period}</div>
                </div>
            {/if}
            {#if author}
                <div class=\"meta-item\">
                    <div class=\"meta-label\">Autor</div>
                    <div class=\"meta-value\">{author}</div>
                </div>
            {/if}
            {#if version}
                <div class=\"meta-item\">
                    <div class=\"meta-label\">Vers√£o</div>
                    <div class=\"meta-value\">{version}</div>
                </div>
            {/if}
        </div>

        <!-- Resumo Executivo -->
        {#if executiveSummary}
            <div class=\"section\">
                <h2 class=\"section-title\">Resumo Executivo</h2>
                <p>{executiveSummary}</p>
            </div>
        {/if}

        <!-- KPIs Principais -->
        {#if kpis}
            <div class=\"section\">
                <h2 class=\"section-title\">Indicadores Principais</h2>
                <div class=\"kpi-grid\">
                    {#for kpi in kpis}
                        <div class=\"kpi-card\">
                            <div class=\"kpi-value\">{kpi.value}</div>
                            <div class=\"kpi-label\">{kpi.label}</div>
                        </div>
                    {/for}
                </div>
            </div>
        {/if}

        <!-- Gr√°ficos -->
        {#if charts}
            <div class=\"section\">
                <h2 class=\"section-title\">An√°lise Gr√°fica</h2>
                {#for chart in charts}
                    <div class=\"chart-placeholder\">
                        {#if chart.image}
                            <img src=\"{chart.image}\" alt=\"{chart.title}\" style=\"max-width: 100%; height: auto;\">
                        {#else}
                            üìä {chart.title ?: 'Gr√°fico'}
                        {/if}
                    </div>
                    {#if chart.description}
                        <p><em>{chart.description}</em></p>
                    {/if}
                {/for}
            </div>
        {/if}

        <!-- Tabela de Dados -->
        {#if dataTable}
            <div class=\"section\">
                <h2 class=\"section-title\">{dataTable.title ?: 'Dados Detalhados'}</h2>
                <table class=\"data-table\">
                    {#if dataTable.headers}
                        <thead>
                            <tr>
                                {#for header in dataTable.headers}
                                    <th>{header}</th>
                                {/for}
                            </tr>
                        </thead>
                    {/if}
                    {#if dataTable.rows}
                        <tbody>
                            {#for row in dataTable.rows}
                                <tr>
                                    {#for cell in row}
                                        <td>{cell}</td>
                                    {/for}
                                </tr>
                            {/for}
                        </tbody>
                    {/if}
                </table>
            </div>
        {/if}

        <!-- Progresso de Metas -->
        {#if goals}
            <div class=\"section\">
                <h2 class=\"section-title\">Progresso das Metas</h2>
                <div class=\"progress-section\">
                    {#for goal in goals}
                        <div class=\"progress-item\">
                            <div class=\"progress-header\">
                                <span><strong>{goal.name}</strong></span>
                                <span>{goal.current}/{goal.target} ({goal.percentage}%)</span>
                            </div>
                            <div class=\"progress-bar\">
                                <div class=\"progress-fill\" style=\"width: {goal.percentage}%\"></div>
                            </div>
                        </div>
                    {/for}
                </div>
            </div>
        {/if}

        <!-- Alertas e Notifica√ß√µes -->
        {#if alerts}
            <div class=\"section\">
                <h2 class=\"section-title\">Alertas e Observa√ß√µes</h2>
                {#for alert in alerts}
                    <div class=\"alert alert-{alert.type}\">
                        {#if alert.title}<strong>{alert.title}:</strong> {/if}
                        {alert.message}
                    </div>
                {/for}
            </div>
        {/if}

        <!-- An√°lise Detalhada -->
        {#if analysis}
            <div class=\"section\">
                <h2 class=\"section-title\">An√°lise Detalhada</h2>
                {#for section in analysis}
                    <h3>{section.title}</h3>
                    <p>{section.content}</p>
                    
                    {#if section.items}
                        <ul>
                            {#for item in section.items}
                                <li><strong>{item.title}:</strong> {item.description}</li>
                            {/for}
                        </ul>
                    {/if}
                {/for}
            </div>
        {/if}

        <!-- Recomenda√ß√µes -->
        {#if recommendations}
            <div class=\"section\">
                <h2 class=\"section-title\">Recomenda√ß√µes</h2>
                <ol>
                    {#for recommendation in recommendations}
                        <li>
                            <strong>{recommendation.title}</strong>
                            {#if recommendation.description}
                                <p>{recommendation.description}</p>
                            {/if}
                            {#if recommendation.priority}
                                <span class=\"badge badge-{recommendation.priority}\">Prioridade: {recommendation.priority}</span>
                            {/if}
                        </li>
                    {/for}
                </ol>
            </div>
        {/if}

        <!-- Pr√≥ximos Passos -->
        {#if nextSteps}
            <div class=\"section\">
                <h2 class=\"section-title\">Pr√≥ximos Passos</h2>
                <ul>
                    {#for step in nextSteps}
                        <li>
                            <strong>{step.action}</strong>
                            {#if step.deadline} - <em>Prazo: {step.deadline}</em>{/if}
                            {#if step.responsible} - <em>Respons√°vel: {step.responsible}</em>{/if}
                        </li>
                    {/for}
                </ul>
            </div>
        {/if}

        <!-- Assinaturas -->
        {#if signatures}
            <div class=\"signature-area\">
                {#for signature in signatures}
                    <div class=\"signature-box\">
                        <div class=\"signature-line\"></div>
                        <strong>{signature.name}</strong><br>
                        <small>{signature.title}</small><br>
                        <small>{signature.date}</small>
                    </div>
                {/for}
            </div>
        {/if}

        <!-- Rodap√© -->
        <div class=\"footer\">
            <p>
                {#if company}
                    {company} | 
                {/if}
                Relat√≥rio gerado em {generatedDate ?: date}
                {#if confidential}
                    <br><strong>DOCUMENTO CONFIDENCIAL</strong>
                {/if}
            </p>
        </div>
    </div>
</body>
</html>